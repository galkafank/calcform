<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Опросный лист Macroscop</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f8f8;
            margin: 0;
            padding: 15px;
            color: #333;
            font-size: 14px;
        }

        .container {
            max-width: 1000px;
            margin: 30px auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            padding: 30px;
        }

        /* Стили для вкладок в стиле браузера */
        .tabs {
            display: flex;
            background: linear-gradient(to bottom, #ffffff, #f0f0f0);
            border-bottom: 1px solid #ddd;
            padding: 0 8px;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background: linear-gradient(to bottom, #f5f5f5, #e8e8e8);
            border: 1px solid #ccc;
            border-bottom: none;
            border-radius: 6px 6px 0 0;
            margin: 4px 3px 0 3px;
            position: relative;
            top: 1px;
            transition: all 0.2s ease;
            font-weight: 500;
            color: #555;
            font-size: 14px;
        }

        .tab:hover {
            background: linear-gradient(to bottom, #f0f0f0, #e0e0e0);
        }

        .tab.active {
            background: white;
            border-color: #ff6600;
            color: #ff6600;
            font-weight: 600;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .tab-content {
            display: none;
            padding: 20px;
        }

        .tab-content.active {
            display: block;
        }

        h1 {
            color: #ff6600;
            margin-bottom: 21px;
            padding-bottom: 15px;
            border-bottom: 3px solid #ff6600;
            font-size: 24px;
            text-align: center;
            background-color: #fff9f5;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 8px;
            background-color: #ffffff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .section:last-child {
            margin-bottom: 20px;
        }

        h2 {
            color: #000000;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 15px;
        }

        .form-group {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 5px;
            background-color: #ffffff;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 15px;
        }
        
        .streams-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .stream-row {
            display: flex;
            gap: 15px;
        }
        
        .stream-field {
            flex:1;
        }
        
        .stream-field label {
            display: block;
            margin-bottom: 2px;
            font-weight: 50;
            color: #333;
            font-size: 14px;
            text-wrap: nowrap;
        }
        
        .stream-field input,
        .stream-field select {
            width: 100% !important;
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 14px;
            transition: all 0.3s;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        
        select, input[type="number"], textarea {
            width: 50%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 14px;
            transition: all 0.3s;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        select:focus, input[type="number"]:focus, textarea:focus {
            border-color: #ff6600;
            outline: none;
            box-shadow: 0 0 0 2px rgba(3, 3, 3, 0.2), 0 1px 4px rgba(0, 0, 0, 0.1);
        }
        
        select:hover, input[type="number"]:hover, textarea:hover {
            border-color: #ff6600;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
        }

        .btn {
            background: linear-gradient(to bottom, #ff6600, #e65c00);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
        }

        .btn:hover {
            background: linear-gradient(to bottom, #e65c00, #cc5200);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transform: translateY(-2px);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 52px;
            height: 28px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .3s;
            border-radius: 28px;
            box-shadow: inset 0 1px 3px rgba(255, 255, 255, 0.2);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .3s;
            border-radius: 50%;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        input:checked + .slider {
            background-color: #ff6600;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        input:checked + .slider:before {
            transform: translateX(22px);
        }

        .checkbox-group {
            display: flex;
            gap: 20px;
            margin-top: 8px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 5px 0;
        }

        .tooltip {
            position: relative;
            display: inline-block;
            border-bottom: 1px dotted #ff6600;
            cursor: help;
            color: #ff6600;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
            font-weight: normal;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }

        .analytics-row {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
            align-items: center;
            padding: 10px;
            background-color: #ffffff;
            border-radius: 5px;
            border: 1px solid #eee;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .analytics-row select, .analytics-row input {
            flex: 1;
            padding: 6px;
            font-size: 14px;
        }

        .analytics-row .cameras-label {
            white-space: nowrap;
            margin: 0 8px;
            font-size: 14px;
        }

        .add-btn {
            background: linear-gradient(to bottom, #ff6600, #e65c00);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
            margin-top: 8px;
            transition: all 0.3s ease;
        }

        .remove-btn {
            background: linear-gradient(to bottom, #ff3300, #e62e00);
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            width: 34px;
            height: 34px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
        }

        .add-btn:hover, .remove-btn:hover {
            background: linear-gradient(to bottom, #e65c00, #cc5200);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .total-cameras {
            font-weight: bold;
            font-size: 18px;
            color: #ff6600;
            background-color: #fff5f0;
            padding: 6px 14px;
            border-radius: 16px;
            border: 1px solid #ffccaa;
        }

        .hidden {
            display: none;
        }

        .stream-section {
            margin-left: 20px;
            padding: 15px;
            background-color: #ffffff;
            border-radius: 8px;
            border: 1px solid #eee;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
        }

        .camera-group {
            width: 100%;
        }

        .actions {
            margin-top: 30px;
            display: flex;
            gap: 12px;
            justify-content: center;
            padding: 20px;
            background-color: #ffffff;
            border-top: 1px solid #eee;
            border-radius: 0 0 8px 8px;
        }

        .save-btn {
            background: linear-gradient(to bottom, #ff6600, #e65c00);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.2s ease;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
        }
        
        .save-btn:hover {
            background: linear-gradient(to bottom, #e65c00, #cc5200);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transform: translateY(-2px);
        }

        input[type="radio"] {
            margin-right: 8px;
            transform: scale(1.2);
        }


        textarea {
            min-height: 100px;
            resize: vertical;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        @media screen and (max-width: 720px) {
            .stream-row {
                flex-direction: column !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">

        <!-- Первая вкладка: Опросный лист для подбора оборудования видеонаблюдения -->
        <div id="server-main" class="section">
            <h1>Опросный лист для подбора оборудования видеонаблюдения</h1>
            
            <div id="detailed-questions">
                <h2>Какое разрешение будет использоваться у камер? Укажите разрешение основного и дополнительного потока.</h2>
            <div class="form-group">
                    <label style="margin-top: 15px;"></label>
                                    <div class="form-group">
                                        <label>Параметры видеопотоков:</label>
                                        <div class="streams-container">
                                            <!-- Первая строка потоков -->
                                            <div class="stream-row">
                                                <div class="stream-field" style="align-self: baseline;">
                                                    <label>Количество камер:</label>
                                                    <input type="number" id="camera-count" min="1" value="1">
                                                </div>
                                                <div class="stream-field" style="align-self: baseline;">
                                                    <label>Количество потоков:</label>
                                                    <select id="stream-count">
                                                        <option value="1">1</option>
                                                        <option value="2" selected>2</option>
                                                        <option value="3">3</option>
                                                        <option value="4">4</option>
                                                    </select>
                                                </div>
                                                <!-- Динамически добавляемые строки потоков -->
                                                <div id="additional-streams" style="flex: 1;">
                                                </div>
                                            </div>
                                        </div>
                                    </div>    
                                </div>
                            </div>
                        </div>
                      <div class="form-group">
                            <div id="camera-groups-container">
                                <!-- Динамически добавляемые группы камер -->
                            </div>
                            <button id="add-camera-group" class="add-btn" style="margin-top: 1px;">Добавить группу камер</button>
                              <div style="margin-top: 50px;">
                                <strong>Общее количество камер во всех группах: <span id="total-group-cameras" class="total-cameras">0</span></strong>
                            </div>
                        </div>

            <div class="form-group" style="margin-top: 15px;">
                <label>Какую аналитику вы хотели бы использовать?</label>
                <div id="analytics-container">
                    <!-- Динамически добавляемые строки аналитики -->
                </div>
                <button id="add-analytics" class="add-btn">+</button>
                <div style="margin-top: 10px;">
                    <strong>Общее количество аналитики: <span id="total-cameras" class="total-cameras">0</span></strong>
                </div>
            </div>

            

            <div class="form-group">
                <label>На какую ОС ориентируетесь?</label>
                <select id="os">
                    <option>Windows</option>
                    <option>Linux</option>
                </select>
            </div>

            <div class="form-group">
                <label>Сколько часов в сутки запись? Сколько дней хранится архив?</label>
                <div>
                    <label>Хранение архива, дней:</label>
                    <input type="number" id="archive-days" min="1" value="30">
                </div>
                <div>
                    <label>Запись, ч/сут:</label>
                    <input type="number" id="recording-hours" min="1" max="24" value="24">
                </div>
            </div>

            <div class="form-group">
                <label>Опишите архитектуру системы видеонаблюдения, которую хотели бы видеть:</label>
                <div class="radio-item">
                    <input type="radio" id="architecture-a" name="architecture" value="a">
                    <label for="architecture-a">Единый центр обработки видео, камеры с трансляцией видео на объектах</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="architecture-b" name="architecture" value="b">
                    <label for="architecture-b">Сервер и камеры на каждом объекте</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="architecture-c" name="architecture" value="c">
                    <label for="architecture-c">Свой вариант ответа</label>
                </div>
                <div id="custom-architecture" class="hidden">
                    <textarea id="custom-architecture-text" rows="4" placeholder="Опишите ваш вариант..."></textarea>
                </div>
            </div>
            
            <div class="form-group">
                <label>Если у вас остались комментарии, можете указать их здесь.</label>
                <textarea id="server-main-comments" placeholder="Введите ваши комментарии здесь..."></textarea>
            </div>
        </div>

        <!-- Вторая вкладка: Вопросы для подбора серверного оборудования-->
<div class="container">
        <div id="server-tech" class="section">
            <!-- <h1>Вопросы для подбора серверного оборудования</h1> -->
        
            <div class="form-group">
                <label>Подобрать серверное оборудование для видеонаблюдения?</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="select-server-equipment" checked>
                    <span class="slider"></span>
                </label>
            </div>

            <div id="server-questions">
                <!-- <h2>Вопросы для подбора серверного оборудования:</h2> -->
                
                <div class="form-group">
                    <label>В каком исполнении должен быть корпус сервера?</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="radio" id="chassis-rack" name="chassis" value="rack">
                            <label for="chassis-rack">rack</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="chassis-tower" name="chassis" value="tower">
                            <label for="chassis-tower">tower</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Будут ли мониторы для отображения камер в реальном времени?</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="use-monitors">
                        <span class="slider"></span>
                    </label>
                </div>

                <div id="monitor-questions" class="hidden">
                    <div class="form-group">
                        <label>
                            Какое разрешение мониторов будет использоваться? 
                            <span class="tooltip">?
                                <span class="tooltiptext">Предпочтительное разрешение для уменьшения требований к оборудованию  -FHD (1920×1080)</span>
                            </span>
                        </label>
                        <select id="monitor-resolution">
                            <option value="HD">HD (1280x720)</option>
                            <option value="FHD" selected>FHD (1920×1080)</option>
                            <option value="2K">2K (2048x1080)</option>
                            <option value="4K">4K (3840×2160)</option>
                            <option value="8K">8K (7680×4320)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Какое количество мониторов будет использоваться?</label>
                        <input type="number" id="monitor-count" min="1" value="1">
                    </div>

                    <div class="form-group">
                        <label>Какое количество камер будет выводится на мониторы?</label>
                        <input type="number" id="cameras-per-monitor" min="1" value="1">
                    </div>
                </div>

                <div class="form-group">
                    <label>Использовать hot swap (горячая замена дисков) в сервере для архива?</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="hot-swap">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="form-group">
                    <label>Необходим ли рейд контроллер в серверном оборудовании?</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="raid-controller">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="form-group">
                    <label>Использовать зеркалирование системного раздела (Raid 1)?</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="raid-1">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="form-group">
                    <label>Использовать резервирование питания для сервера (два блока питания)?</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="redundant-psu">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="form-group">
                    <label>
                        Учесть наличие BMC (IPMI)  при сборке сервера?
                        <span class="tooltip">?
                            <span class="tooltiptext">Микроконтроллер на материнской плате сервера, который работает независимо от основной ОС и даёт администратору доступ к управлению оборудованием удалённо, через web-интерфейс или IPMI-протокол</span>
                        </span>
                    </label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="ipmi">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <div id="spec-questions" class="hidden">
                <div class="form-group">
                    <label>Необходим подбор спецификаций сервера, для самостоятельной покупки оборудования?</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="select-specs">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            
            <div class="form-group">
                <label>Если у вас остались комментарии, можете указать их здесь.</label>
                <textarea id="server-tech-comments" placeholder="Введите ваши комментарии здесь..."></textarea>
            </div>
        </div>

        <!-- Третья вкладка: Вопросы для расчета клиентского оборудования -->
        <div id="client" class="section">
            <h1>Вопросы для расчета клиентского оборудования</h1>
            
            <div class="form-group">
                <label>Необходим подбор клиентского оборудования?</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="select-client-equipment">
                    <span class="slider"></span>
                </label>
            </div>

            <div id="client-questions" class="hidden">
                <div class="form-group">
                    <label>Какое количество мониторов будет использоваться?</label>
                    <input type="number" id="client-monitor-count" min="1" value="1">
                </div>

                <div class="form-group">
                    <label>
                        Какое разрешение мониторов будет использоваться?
                        <span class="tooltip">?
                            <span class="tooltiptext">Предпочтительное разрешение для уменьшения требований к оборудованию - FHD (1920×1080)</span>
                        </span>
                    </label>
                    <select id="client-monitor-resolution">
                        <option value="HD">HD (1280x720)</option>
                        <option value="FHD" selected>FHD (1920×1080)</option>
                        <option value="2K">2K (2048x1080)</option>
                        <option value="4K">4K (3840×2160)</option>
                        <option value="8K">8K (7680×4320)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Какое разрешение будет использоваться у камер? Укажите разрешение основного и дополнительного потока.</label>
                    <div class="stream-section">
                        <div class="form-group">
                            <label>Основной поток:</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <select id="client-main-stream">
                                    <option value="0.3">0,3 MP</option>
                                    <option value="0.4">0,4 MP</option>
                                    <option value="1">1 MP</option>
                                    <option value="1.3">1,3 MP</option>
                                    <option value="2" selected>2 MP</option>
                                    <option value="3">3 MP</option>
                                    <option value="4">4 MP</option>
                                    <option value="5">5 MP</option>
                                    <option value="6">6 MP</option>
                                    <option value="8">8 MP</option>
                                    <option value="10">10 MP</option>
                                    <option value="12">12 MP</option>
                                </select>
                                <select id="client-main-stream-codec">
                                    <option value="h264" selected>H.264</option>
                                    <option value="h265">H.265</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Дополнительный поток:</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <select id="client-secondary-stream">
                                    <option value="0.3" selected>0,3 MP</option>
                                    <option value="0.4">0,4 MP</option>
                                    <option value="1">1 MP</option>
                                    <option value="1.3">1,3 MP</option>
                                    <option value="2">2 MP</option>
                                    <option value="3">3 MP</option>
                                    <option value="4">4 MP</option>
                                    <option value="5">5 MP</option>
                                    <option value="6">6 MP</option>
                                    <option value="8">8 MP</option>
                                    <option value="10">10 MP</option>
                                    <option value="12">12 MP</option>
                                </select>
                                <select id="client-secondary-stream-codec">
                                    <option value="h264" selected>H.264</option>
                                    <option value="h265">H.265</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Какое исполнение корпуса необходимо для клиентского рабочего места?</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="radio" id="client-chassis-rack" name="client-chassis" value="rack">
                            <label for="client-chassis-rack">rack</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="client-chassis-tower" name="client-chassis" value="tower">
                            <label for="client-chassis-tower">tower</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Использовать зеркалирование системного раздела (Raid 1)?</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="client-raid-1">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="form-group">
                    <label>Какое количество клиентских рабочих станций вам необходимо?</label>
                    <input type="number" id="client-workstations" min="1" value="1">
                </div>

                <div class="form-group">
                    <label>Какое количество камер будет выводится на мониторы?</label>
                    <input type="number" id="client-cameras-per-monitor" min="1" value="1">
                </div>

                <div class="form-group">
                    <label>Если у вас остались комментарии, можете указать их здесь.</label>
                    <textarea id="client-comments" placeholder="Введите ваши комментарии здесь..."></textarea>
                </div>
            </div>
        </div>
        <!-- Кнопки сохранения -->
        <div class="actions">
            <button id="copy-to-clipboard" class="save-btn">Сохранить в буфер</button>
            <button id="save-to-file" class="save-btn">Сохранить результат в txt документ</button>
        </div>
    </div>
    <script>
        // Функциональность вкладок
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // Убрать активный класс у всех вкладок и контентов
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // Добавить активный класс к выбранной вкладке
                tab.classList.add('active');
                
                // Показать соответствующий контент
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Список аналитик
        const analyticsList = [
            "Поиск объектов", 
            "Трекинг",
            "Подсчет посетителей",
            "Определение длины очереди",
            "Детектор скопления людей",
            "Тепловая карта интенсивности движения",
            "Контроль активности персонала",
            "Обнаружение лиц",
            "Детектор саботажа",
            "Обнаружение оставленных предметов", 
            "Детектор дыма и огня",
            "Контроль спецодежды",
            "Распознование автономеров (Macroscop)",
            "Распознование автономеров (Complete)",
            "Распознование автономеров (Light)",
            "Наполненность полок",
            "Распознование лиц (Light)",
            "Распознование лиц (Complete)",
            "Подсчет уникальных посетителей",
            "Подсчет объектов",
            "Обнаружение спецтранспорта",
            "Обнаружение падений"
        ];

        // Добавление строки аналитики
        function addAnalyticsRow() {
            const container = document.getElementById('analytics-container');
            const row = document.createElement('div');
            row.className = 'analytics-row';
            
            // Создаем select для аналитики
            const select = document.createElement('select');
            analyticsList.forEach(analytic => {
                const option = document.createElement('option');
                option.value = analytic;
                option.textContent = analytic;
                select.appendChild(option);
            });
            
            // Создаем input для количества камер
            const input = document.createElement('input');
            input.type = 'number';
            input.min = '0';
            input.value = '0';
            input.className = 'camera-count';
            
            // Создаем метку
            const label = document.createElement('span');
            label.className = 'cameras-label';
            label.textContent = 'кол-во камер';
            
            // Создаем кнопку удаления
            const removeBtn = document.createElement('button');
            removeBtn.className = 'remove-btn';
            removeBtn.textContent = '-';
            removeBtn.onclick = function() {
                container.removeChild(row);
                updateTotalCameras();
            };
            
            // Добавляем все элементы в строку
            row.appendChild(select);
            row.appendChild(input);
            row.appendChild(label);
            row.appendChild(removeBtn);
            
            // Добавляем обработчик изменения количества камер
            input.addEventListener('input', updateTotalCameras);
            select.addEventListener('change', updateTotalCameras);
            
            container.appendChild(row);
            updateTotalCameras();
        }

        // Добавление группы камер
        function addCameraGroup() {
            const container = document.getElementById('camera-groups-container');
            const group = document.createElement('div');
            group.className = 'camera-group';
            group.style.border = '1px solid #eee';
            group.style.borderRadius = '8px';
            group.style.padding = '20px';
            group.style.marginBottom = '20px';
            group.style.backgroundColor = '#f9f9f9';
            group.style.boxShadow = '0 1px 4px rgba(0, 0, 0, 0.05)';
            group.style.width = '100%';
            
            // Создаем заголовок группы
            const header = document.createElement('div');
            header.style.display = 'flex';
            header.style.justifyContent = 'space-between';
            header.style.alignItems = 'center';
            header.style.marginBottom = '10px';
            
            const title = document.createElement('h3');
            title.textContent = 'Группа камер';
            title.style.margin = '0';
            title.style.color = '#ff6600';
            title.style.fontSize = '18px';
            title.style.fontWeight = '600';
            
            const removeBtn = document.createElement('button');
            removeBtn.className = 'remove-btn';
            removeBtn.textContent = '-';
            removeBtn.onclick = function() {
                container.removeChild(group);
                updateTotalGroupCameras();
            };
            
            header.appendChild(title);
            header.appendChild(removeBtn);
            group.appendChild(header);
            
            // Создаем поля для группы камер
            const groupContent = document.createElement('div');
            
            // Количество камер в группе
            const countGroup = document.createElement('div');
            countGroup.className = 'form-group';
            countGroup.innerHTML = '<label>Количество камер:</label><input type="number" class="group-camera-count" min="1" value="1">';
            groupContent.appendChild(countGroup);
            
            // Потоки группы с гибкой системой
            const streamsGroup = document.createElement('div');
            streamsGroup.className = 'stream-section';
            streamsGroup.innerHTML = `
                <h4>Параметры видеопотоков группы</h4>
                <div class="streams-container">
                    <!-- Первая строка потоков -->
                    <div class="stream-row">
                        <div class="stream-field">
                            <!-- Пустое поле для "Количество камер" -->
                        </div>
                        <div class="stream-field" style="align-self: baseline;">
                            <label>Количество потоков:</label>
                            <select class="group-stream-count">
                                <option value="1">1</option>
                                <option value="2" selected>2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                            </select>
                        </div>
                        <!-- Динамически добавляемые строки потоков -->
                        <div class="group-additional-streams" style="flex: 1;">
                        </div>
                    </div>
                </div>
            `;
            groupContent.appendChild(streamsGroup);
            
            group.appendChild(groupContent);
            container.appendChild(group);
            
            // Добавляем обработчики событий
            const countInput = group.querySelector('.group-camera-count');
            countInput.addEventListener('input', updateTotalGroupCameras);
            
            // Обработчик изменения количества потоков в группе
            const streamCountSelect = group.querySelector('.group-stream-count');
            streamCountSelect.addEventListener('change', function() {
                const streamCount = parseInt(this.value);
                const additionalStreamsContainer = group.querySelector('.group-additional-streams');
                
                // Очистим контейнер
                additionalStreamsContainer.innerHTML = '';
                
                // Добавим строки потоков в том же 4-колоночном макете, начиная с потока 1
                for (let i = 1; i <= streamCount; i++) {
                    const streamRow = document.createElement('div');
                    streamRow.className = 'stream-row';
                    streamRow.innerHTML = `
                        <div class="stream-field">
                            <label>Разрешение потока ${i}:</label>
                            <select class="group-stream-resolution-${i}">
                                <option value="0.3">0,3 MP</option>
                                <option value="0.4">0,4 MP</option>
                                <option value="1">1 MP</option>
                                <option value="1.3">1,3 MP</option>
                                <option value="2" selected>2 MP</option>
                                <option value="3">3 MP</option>
                                <option value="4">4 MP</option>
                                <option value="5">5 MP</option>
                                <option value="6">6 MP</option>
                                <option value="8">8 MP</option>
                                <option value="10">10 MP</option>
                                <option value="12">12 MP</option>
                            </select>
                        </div>
                        <div class="stream-field">
                            <label>Кодек потока ${i}:</label>
                            <select class="group-stream-codec-${i}">
                                <option value="h264" selected>H.264</option>
                                <option value="h265">H.265</option>
                            </select>
                        </div>
                    `;
                    additionalStreamsContainer.appendChild(streamRow);
                }
                
                // Установим значения по умолчанию для первого потока
                const resolutionSelect1 = group.querySelector('.group-stream-resolution-1');
                const codecSelect1 = group.querySelector('.group-stream-codec-1');
                
                if (resolutionSelect1) {
                    resolutionSelect1.value = "2"; // 2 MP
                }
                
                if (codecSelect1) {
                    codecSelect1.value = "h264"; // H.264
                }
                
                // Установим значения по умолчанию для второго потока, если он существует
                if (streamCount >= 2) {
                    const resolutionSelect2 = group.querySelector('.group-stream-resolution-2');
                    const codecSelect2 = group.querySelector('.group-stream-codec-2');
                    
                    if (resolutionSelect2) {
                        resolutionSelect2.value = "2"; // 2 MP
                    }
                    
                    if (codecSelect2) {
                        codecSelect2.value = "h264"; // H.264
                    }
                }
            });
            
            // Автоматически отображаем второй поток при создании новой группы
            streamCountSelect.dispatchEvent(new Event('change'));
            
            updateTotalGroupCameras();
        }

        // Обновление общего количества камер
        function updateTotalCameras() {
            let total = 0;
            document.querySelectorAll('.analytics-row').forEach(row => {
                const input = row.querySelector('.camera-count');
                if (input) {
                    total += parseInt(input.value) || 0;
                }
            });
            
            document.getElementById('total-cameras').textContent = total;
        }

        // Обновление общего количества камер во всех группах
        function updateTotalGroupCameras() {
            let total = 0;
            document.querySelectorAll('.camera-group').forEach(group => {
                const input = group.querySelector('.group-camera-count');
                if (input) {
                    total += parseInt(input.value) || 0;
                }
            });
            
            // Добавляем количество камер из блока "Параметры видеопотоков"
            const detailedCameraCount = document.getElementById('camera-count');
            if (detailedCameraCount) {
                total += parseInt(detailedCameraCount.value) || 0;
            }
            
            document.getElementById('total-group-cameras').textContent = total;
        }


        // Обновление общего количества камер при изменении значения в "Параметры видеопотоков"
        document.getElementById('camera-count').addEventListener('input', function() {
            updateTotalCameras();
            updateTotalGroupCameras();
        });

        // Показ/скрытие пользовательской архитектуры
        document.querySelectorAll('input[name="architecture"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const custom = document.getElementById('custom-architecture');
                if (this.value === 'c') {
                    custom.classList.remove('hidden');
                } else {
                    custom.classList.add('hidden');
                }
            });
        });

        // Показ/скрытие вопросов о мониторах
        document.getElementById('use-monitors').addEventListener('change', function() {
            const monitorQuestions = document.getElementById('monitor-questions');
            if (this.checked) {
                monitorQuestions.classList.remove('hidden');
            } else {
                monitorQuestions.classList.add('hidden');
            }
        });

        // Показ/скрытие вопросов о серверном оборудовании
        document.getElementById('select-server-equipment').addEventListener('change', function() {
            const serverQuestions = document.getElementById('server-questions');
            const specQuestions = document.getElementById('spec-questions');
            
            if (this.checked) {
                serverQuestions.classList.remove('hidden');
                specQuestions.classList.add('hidden');
            } else {
                serverQuestions.classList.add('hidden');
                specQuestions.classList.remove('hidden');
            }
        });

        // Инициализация первой строки аналитики
        document.getElementById('add-analytics').addEventListener('click', addAnalyticsRow);
        // Добавляем первую строку при загрузке
        addAnalyticsRow();

        // Инициализация первой группы камер
        document.getElementById('add-camera-group').addEventListener('click', addCameraGroup);
        
        // Автоматическое отображение второго потока при загрузке страницы для основного блока
        // Установим значение "2" для количества потоков по умолчанию
        const streamCountSelect = document.getElementById('stream-count');
        streamCountSelect.value = "2";
        // Вызовем обработчик события change для отображения полей второго потока
        // Добавим небольшую задержку, чтобы убедиться, что DOM полностью загружен
        setTimeout(() => {
            streamCountSelect.dispatchEvent(new Event('change'));
        }, 0);
        
        // Автоматическое отображение второго потока при загрузке страницы для первой группы камер
        function initializeFirstGroupStreams() {
            const firstGroup = document.querySelector('.camera-group');
            if (firstGroup) {
                const streamCountSelect = firstGroup.querySelector('.group-stream-count');
                if (streamCountSelect) {
                    // Установим значение "2" для количества потоков по умолчанию
                    streamCountSelect.value = "2";
                    // Напрямую вызываем обработчик события change
                    // Добавим небольшую задержку, чтобы убедиться, что DOM полностью загружен
                    setTimeout(() => {
                        const event = new Event('change');
                        streamCountSelect.dispatchEvent(event);
                    }, 0);
                }
            }
        }
        
        // Вызываем инициализацию потоков для первой группы камер после загрузки DOM
        document.addEventListener('DOMContentLoaded', function() {
            initializeFirstGroupStreams();
        });

        // Показ/скрытие вопросов клиентского оборудования
        document.getElementById('select-client-equipment').addEventListener('change', function() {
            const clientQuestions = document.getElementById('client-questions');
            if (this.checked) {
                clientQuestions.classList.remove('hidden');
                // Изменяем цвет переключателя на оранжевый при выборе "да"
                this.parentNode.querySelector('.slider').style.backgroundColor = '#ff6600';
            } else {
                clientQuestions.classList.add('hidden');
                // Возвращаем обычный цвет при выборе "нет"
                this.parentNode.querySelector('.slider').style.backgroundColor = '';
            }
        });

        // Функция для сбора всех ответов в формате markdown
        function collectAnswers() {
            let markdown = "# Опросный лист Macroscop\n\n";
            
            // Первая вкладка
            markdown += "## Опросный лист для подбора оборудования видеонаблюдения\n\n";
            
            // Аналатика
            markdown += "### Какую аналитику вы хотели бы использовать?\n";
            let totalCameras = 0;
            document.querySelectorAll('.analytics-row').forEach((row, index) => {
                const select = row.querySelector('select');
                const input = row.querySelector('.camera-count');
                if (select && input) {
                    const analytic = select.value;
                    const count = input.value;
                    markdown += `- ${analytic}: ${count} камер\n`;
                    totalCameras += parseInt(count) || 0;
                }
            });
            
            // Добавляем количество камер из блока "Параметры видеопотоков"
            const detailedCameraCount = document.getElementById('camera-count').value;
            markdown += `- Камеры из блока "Параметры видеопотоков": ${detailedCameraCount} камер\n`;
            totalCameras += parseInt(detailedCameraCount) || 0;
            
            markdown += `\n**Общее количество аналитики: ${totalCameras}**\n\n`;
            
            // Параметры видеопотоков
            markdown += "### Параметры видеопотоков\n";
            const cameraCount = document.getElementById('camera-count').value;
            const streamCount = document.getElementById('stream-count').value;
            const streamResolution = document.getElementById('stream-resolution-1').value;
            const streamCodec = document.getElementById('stream-codec-1').value;
            
            markdown += `- Количество камер: ${cameraCount}\n`;
            markdown += `- Количество потоков: ${streamCount}\n`;
            markdown += `- Разрешение потока 1: ${streamResolution} MP\n`;
            markdown += `- Кодек потока 1: ${streamCodec.toUpperCase()}\n`;
            
            // Добавляем информацию о дополнительных потоках
            for (let i = 2; i <= streamCount; i++) {
                const additionalResolution = document.getElementById(`stream-resolution-${i}`).value;
                const additionalCodec = document.getElementById(`stream-codec-${i}`).value;
                markdown += `- Разрешение потока ${i}: ${additionalResolution} MP\n`;
                markdown += `- Кодек потока ${i}: ${additionalCodec.toUpperCase()}\n`;
            }
            
            markdown += "\n";
            
            // ОС
            const os = document.getElementById('os').value;
            markdown += `### На какую ОС ориентируетесь?\n${os}\n\n`;
            
            // Хранение архива
            const archiveDays = document.getElementById('archive-days').value;
            const recordingHours = document.getElementById('recording-hours').value;
            markdown += `### Сколько часов в сутки запись? Сколько дней хранится архив?\n`;
            markdown += `- Хранение архива, дней: ${archiveDays}\n`;
            markdown += `- Запись, ч/сут: ${recordingHours}\n\n`;
            
            // Архитектура
            const architecture = document.querySelector('input[name="architecture"]:checked');
            markdown += `### Опишите архитектуру системы видеонаблюдения\n`;
            if (architecture) {
                if (architecture.value === 'a') {
                    markdown += "Единый центр обработки видео, камеры с трансляцией видео на объектах\n";
                } else if (architecture.value === 'b') {
                    markdown += "Сервер и камеры на каждом объекте\n";
                } else if (architecture.value === 'c') {
                    const custom = document.getElementById('custom-architecture-text').value;
                    markdown += `Свой вариант: ${custom}\n`;
                }
            }
            markdown += "\n";
            
            // Группы камер
            markdown += "### Группы камер\n";
            let totalGroupCameras = 0;
            document.querySelectorAll('.camera-group').forEach((group, index) => {
                const cameraCount = group.querySelector('.group-camera-count').value;
                const streamCount = group.querySelector('.group-stream-count').value;
                // Теперь первая строка потоков тоже имеет индекс 1
                const streamResolution = group.querySelector('.group-stream-resolution-1') ? group.querySelector('.group-stream-resolution-1').value : group.querySelector('.group-stream-resolution').value;
                const streamCodec = group.querySelector('.group-stream-codec-1') ? group.querySelector('.group-stream-codec-1').value : group.querySelector('.group-stream-codec').value;
                
                markdown += `\n**Группа ${index + 1}**\n`;
                markdown += `- Количество камер: ${cameraCount}\n`;
                markdown += `- Количество потоков: ${streamCount}\n`;
                markdown += `- Разрешение потока 1: ${streamResolution} MP\n`;
                markdown += `- Кодек потока 1: ${streamCodec.toUpperCase()}\n`;
                
                // Добавляем информацию о дополнительных потоках
                for (let i = 2; i <= streamCount; i++) {
                    const additionalResolution = group.querySelector(`.group-stream-resolution-${i}`) ? group.querySelector(`.group-stream-resolution-${i}`).value : 'Не указано';
                    const additionalCodec = group.querySelector(`.group-stream-codec-${i}`) ? group.querySelector(`.group-stream-codec-${i}`).value : 'Не указано';
                    markdown += `- Разрешение потока ${i}: ${additionalResolution} MP\n`;
                    markdown += `- Кодек потока ${i}: ${additionalCodec.toUpperCase()}\n`;
                }
                
                totalGroupCameras += parseInt(cameraCount) || 0;
            });
            markdown += `\n**Общее количество камер во всех группах: ${totalGroupCameras}**\n\n`;
            
            // Вторая вкладка
            markdown += "## Техническая часть реализации сервера\n\n";
            
            // Подбор серверного оборудования
            const selectServer = document.getElementById('select-server-equipment').checked;
            markdown += `### Подобрать серверное оборудование для видеонаблюдения?\n${selectServer ? 'Да' : 'Нет'}\n\n`;
            
            if (selectServer) {
                // Вопросы для подбора серверного оборудования
                markdown += "### Вопросы для подбора серверного оборудования\n";
                
                // Корпус сервера
                const chassis = document.querySelector('input[name="chassis"]:checked');
                if (chassis) {
                    markdown += `- В каком исполнении должен быть корпус сервера: ${chassis.value}\n`;
                }
                
                // Мониторы
                const useMonitors = document.getElementById('use-monitors').checked;
                markdown += `- Будут ли мониторы для отображения камер в реальном времени: ${useMonitors ? 'Да' : 'Нет'}\n`;
                
                if (useMonitors) {
                    const monitorResolution = document.getElementById('monitor-resolution').value;
                    const monitorCount = document.getElementById('monitor-count').value;
                    const camerasPerMonitor = document.getElementById('cameras-per-monitor').value;
                    markdown += `  - Разрешение мониторов: ${monitorResolution}\n`;
                    markdown += `  - Количество мониторов: ${monitorCount}\n`;
                    markdown += `  - Количество камер на мониторы: ${camerasPerMonitor}\n`;
                }
                
                // Hot swap
                const hotSwap = document.getElementById('hot-swap').checked;
                markdown += `- Использовать hot swap (горячая замена дисков): ${hotSwap ? 'Да' : 'Нет'}\n`;
                
                // RAID контроллер
                const raidController = document.getElementById('raid-controller').checked;
                markdown += `- Необходим ли рейд контроллер: ${raidController ? 'Да' : 'Нет'}\n`;
                
                // RAID 1
                const raid1 = document.getElementById('raid-1').checked;
                markdown += `- Использовать зеркалирование системного раздела (Raid 1): ${raid1 ? 'Да' : 'Нет'}\n`;
                
                // Резервирование питания
                const redundantPSU = document.getElementById('redundant-psu').checked;
                markdown += `- Использовать резервирование питания: ${redundantPSU ? 'Да' : 'Нет'}\n`;
                
                // IPMI
                const ipmi = document.getElementById('ipmi').checked;
                markdown += `- Использовать iLO, iDRAC, IPMI: ${ipmi ? 'Да' : 'Нет'}\n`;
            } else {
                // Подбор спецификаций
                const selectSpecs = document.getElementById('select-specs').checked;
                markdown += `### Необходим подбор спецификаций сервера, для самостоятельной покупки оборудования?\n${selectSpecs ? 'Да' : 'Нет'}\n`;
            }
            markdown += "\n";
            
            // Третья вкладка
            markdown += "## Вопросы для расчета клиентского оборудования\n\n";
            
            // Подбор клиентского оборудования
            const selectClient = document.getElementById('select-client-equipment').checked;
            markdown += `### Необходим подбор клиентского оборудования?\n${selectClient ? 'Да' : 'Нет'}\n\n`;
            
            let clientComments = ''; // Объявляем переменную заранее
            
            if (selectClient) {
                const clientMonitorCount = document.getElementById('client-monitor-count').value;
                const clientMonitorResolution = document.getElementById('client-monitor-resolution').value;
                const clientMainStream = document.getElementById('client-main-stream').value;
                const clientSecondaryStream = document.getElementById('client-secondary-stream').value;
                const clientChassis = document.querySelector('input[name="client-chassis"]:checked');
                const clientRaid1 = document.getElementById('client-raid-1').checked;
                const clientWorkstations = document.getElementById('client-workstations').value;
                const clientCamerasPerMonitor = document.getElementById('client-cameras-per-monitor').value;
                clientComments = document.getElementById('client-comments').value; // Присваиваем значение только если блок активен
                
                markdown += `- Количество мониторов: ${clientMonitorCount}\n`;
                markdown += `- Разрешение мониторов: ${clientMonitorResolution}\n`;
                markdown += `- Основной поток камер: ${clientMainStream} MP\n`;
                markdown += `- Дополнительный поток камер: ${clientSecondaryStream} MP\n`;
                
                // Добавляем информацию о кодеках
                const clientMainStreamCodec = document.getElementById('client-main-stream-codec').value;
                const clientSecondaryStreamCodec = document.getElementById('client-secondary-stream-codec').value;
                markdown += `- Кодек основного потока: ${clientMainStreamCodec.toUpperCase()}\n`;
                markdown += `- Кодек дополнительного потока: ${clientSecondaryStreamCodec.toUpperCase()}\n`;
                
                if (clientChassis) {
                    markdown += `- Исполнение корпуса: ${clientChassis.value}\n`;
                }
                markdown += `- Использовать RAID 1: ${clientRaid1 ? 'Да' : 'Нет'}\n`;
                markdown += `- Количество клиентских рабочих станций: ${clientWorkstations}\n`;
                markdown += `- Количество камер на мониторы: ${clientCamerasPerMonitor}\n`;
                if (clientComments) {
                    markdown += `- Комментарии к расчету: ${clientComments}\n`;
                }
            }
            
            // Комментарии к расчету на всех вкладках
            const serverMainComments = document.getElementById('server-main-comments').value;
            if (serverMainComments) {
                markdown += `\n### Комментарии к расчету (Серверное оборудование): ${serverMainComments}\n`;
            }
            
            const serverTechComments = document.getElementById('server-tech-comments').value;
            if (serverTechComments) {
                markdown += `\n### Комментарии к расчету (Техническая часть сервера): ${serverTechComments}\n`;
            }
            
            if (clientComments) {
                markdown += `\n### Комментарии к расчету (Клиентское оборудование): ${clientComments}\n`;
            }
            
            return markdown;
        }

        // Сохранение в буфер обмена
        document.getElementById('copy-to-clipboard').addEventListener('click', function() {
            const markdown = collectAnswers();
            
            // Копирование в буфер обмена
            navigator.clipboard.writeText(markdown).then(function() {
                alert('Результаты опроса скопированы в буфер обмена!');
            }, function() {
                // Альтернативный метод для старых браузеров
                const textArea = document.createElement("textarea");
                textArea.value = markdown;
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                
                try {
                    const successful = document.execCommand('copy');
                    if (successful) {
                        alert('Результаты опроса скопированы в буфер обмена!');
                    } else {
                        alert('Не удалось скопировать в буфер обмена');
                    }
                } catch (err) {
                    alert('Ошибка при копировании в буфер обмена');
                }
                
                document.body.removeChild(textArea);
            });
        });

        // Сохранение в файл
        document.getElementById('save-to-file').addEventListener('click', function() {
            const markdown = collectAnswers();
            const blob = new Blob([markdown], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'Опросный лист Macroscop.txt';
            document.body.appendChild(a);
            a.click();
            
            // Очистка
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
        });
        // Обработчик изменения количества потоков
        document.getElementById('stream-count').addEventListener('change', function() {
            const streamCount = parseInt(this.value);
            const additionalStreamsContainer = document.getElementById('additional-streams');
            
            // Очистим контейнер
            additionalStreamsContainer.innerHTML = '';
            
            // Добавим дополнительные строки потоков в том же 4-колоночном макете
            for (let i = 1; i <= streamCount; i++) {
                const streamRow = document.createElement('div');
                streamRow.className = 'stream-row';
                streamRow.innerHTML = `
                    <div class="stream-field">
                        <label>Разрешение потока ${i}:</label>
                        <select id="stream-resolution-${i}">
                            <option value="0.3">0,3 MP</option>
                            <option value="0.4">0,4 MP</option>
                            <option value="1">1 MP</option>
                            <option value="1.3">1,3 MP</option>
                            <option value="2" selected>2 MP</option>
                            <option value="3">3 MP</option>
                            <option value="4">4 MP</option>
                            <option value="5">5 MP</option>
                            <option value="6">6 MP</option>
                            <option value="8">8 MP</option>
                            <option value="10">10 MP</option>
                            <option value="12">12 MP</option>
                        </select>
                    </div>
                    <div class="stream-field">
                        <label>Кодек потока ${i}:</label>
                        <select id="stream-codec-${i}">
                            <option value="h264" selected>H.264</option>
                            <option value="h265">H.265</option>
                        </select>
                    </div>
                `;
                additionalStreamsContainer.appendChild(streamRow);
            }
            
            // Если количество потоков равно 2 (по умолчанию), убедимся, что поля отображаются и имеют правильные значения
            if (streamCount === 2) {
                // Проверим, есть ли уже поля для второго потока
                let existingResolution = document.getElementById('stream-resolution-2');
                let existingCodec = document.getElementById('stream-codec-2');
                
                // Если полей нет, создадим их
                if (!existingResolution && !existingCodec) {
                    const streamRow = document.createElement('div');
                    streamRow.className = 'stream-row';
                    streamRow.innerHTML = `
                        <div class="stream-field">
                            <label>Разрешение потока 2:</label>
                            <select id="stream-resolution-2">
                                <option value="0.3">0,3 MP</option>
                                <option value="0.4">0,4 MP</option>
                                <option value="1">1 MP</option>
                                <option value="1.3">1,3 MP</option>
                                <option value="2" selected>2 MP</option>
                                <option value="3">3 MP</option>
                                <option value="4">4 MP</option>
                                <option value="5">5 MP</option>
                                <option value="6">6 MP</option>
                                <option value="8">8 MP</option>
                                <option value="10">10 MP</option>
                                <option value="12">12 MP</option>
                            </select>
                        </div>
                        <div class="stream-field">
                            <label>Кодек потока 2:</label>
                            <select id="stream-codec-2">
                                <option value="h264" selected>H.264</option>
                                <option value="h265">H.265</option>
                            </select>
                        </div>
                    `;
                    additionalStreamsContainer.appendChild(streamRow);
                }
                
                // Установим значения по умолчанию для второго потока
                const resolutionSelect = document.getElementById('stream-resolution-2');
                const codecSelect = document.getElementById('stream-codec-2');
                
                if (resolutionSelect) {
                    resolutionSelect.value = "2"; // 2 MP
                }
                
                if (codecSelect) {
                    codecSelect.value = "h264"; // H.264
                }
            }
        });
    </script>
</body>
</html>

